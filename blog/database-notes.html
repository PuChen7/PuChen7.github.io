<!-- This is the About Me page -->
<!DOCTYPE html>
<html>
    <head>
        <title>Pu Chen | Blog</title>

        <!-- CSS links -->
        <link rel="stylesheet" href="../css/blog.css" />
        <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <script>
            $(document).ready(function(){
                
                // Add smooth scrolling to all links
                $("a").on('click', function(event) {
                    // Make sure this.hash has a value before overriding default behavior
                    if (this.hash !== "") {
                        // Prevent default anchor click behavior
                        event.preventDefault();
                
                        // Store hash
                        var hash = this.hash;
                
                        // Using jQuery's animate() method to add smooth page scroll
                        // The optional number (800) specifies the number of milliseconds it takes to scroll to the specified area
                        $('html, body').animate({
                        scrollTop: $(this.hash).offset().top - ($('#nav-bar').height()+10)
                        }, 800, function(){
                    
                        // Add hash (#) to URL when done scrolling (default click behavior)
                        window.location.hash = hash;
                        
                        });
                    } // End if
                });
            });                    
        </script>
    </head>

    <body>
        <!-- Navigation Bar -->
        <nav id="nav-bar">
            <div class="tag">Database and MySQL | Pu Chen</div>
            <ul>
                <li><a href="../contact.html">Contact</a></li>
                <li><a href="../archives.html">Archives</a></li>
                <li><a href="../aboutme.html">About Me</a></li>
                <li><a href="https://github.com/PuChen7">Projects</a></li>
                <li><a class="active" href="../index.html">Home</a></li>
            </ul>
       </nav>

       <div id="guide"><h><b>Topics Covered in this Page</b></h>
            <ol>
                <li><a href="#Database-Normalization">Database Normalization</a></li>
                <li><a href="#primary-key">Primary Key, Candidate Key</a></li>
                <li><a href="#constraints">Constraints</a></li>
                <li><a href="#order-by">ORDER BY</a></li>
                <li><a href="#in">IN</a></li>
                <li><a href="#between">BETWEEN</a></li>
                <li><a href="#min-max">MIN/MAX</a></li>
                <li><a href="#union">UNION</a></li>
                <li><a href="#join">JOIN</a></li>
                <li><a href="#group-by">GROUP BY</a></li>
                <li><a href="#limit-offset">LIMIT and OFFSET</a></li>
                <li><a href="#ifnull">IFNULL</a></li>
                <li><a href="#basic-ops">Basic Operations</a></li>
                <li><a href="#null">NULL values</a></li>
                <li><a href="#like">LIKE</a></li>
                <li><a href="#alias">alias</a></li>
                <li><a href="#select-into">SELECT...INTO</a></li>
                <li><a href="#insert-into">INSERT INTO..SELECT...</a></li>
                <li><a href="#procedure">Stored Procedure</a></li>
                <li><a href="#trigger">Trigger</a></li>
                <li><a href="#questions">Query Questions</a></li>
            </ol>
        </div>

       <!-- Main body of the front page -->
       <div class="blog-content">
            <h id="Database-Normalization">Database Normalization</h>
            <ul>
                <li><text>First Norm</text>: only singled value attribute</li>
                <li><text>Second Norm</text>: No Partial Dependency (If proper subset of candidate key determines non-prime attribute, it is called partial dependency.)</li>
                <li><text>Third Norm</text>: No Transitive Dependency.(When a non-prime attribute depends on other non-prime attributes rather than depending upon the prime attributes or primary key.)</li>
            </ul>

            <h id="primary-key">Primary Key, Candidate Key, Foreign Key</h>
            <ul>
                <li><b>Primary Key</b> vs. <b>Candidate Key</b>
                    <ul>   
                        <li>Both Primary and Candidate keys can uniquely identify records in a table on the database.</li>
                        <li>Both Primary and Candidate keys have constraints UNIQUE and NOT NULL.</li>
                        <li>An example of Primary key and Candidate key can be ID and SSN number in an Employee table, Since both can identify each employee uniquely they are candidate key and anyone can become the primary key.</li>
                    </ul>
                </li>
                <li><b>Foreign Key</b>
                    <ul>
                        <li>A Foreign key is a column in one table which is the <text>primary key</text> on another table.</li>
                        <li>Foreign key can be <text>duplicate</text> opposite to primary key which is always <text>unique</text>.</li>
                    </ul>
                </li>
            </ul>

            <h id="constraints">Constraints</h>
            <ul>
                <li><b>NOT NULL</b> - Ensures that a column cannot have a NULL value</li>
                <li><b>UNIQUE</b> - Ensures that all values in a column are different</li>
                <li><b>PRIMARY KEY</b> - A combination of a NOT NULL and UNIQUE. Uniquely identifies each row in a table</li>
                <li><b>FOREIGN KEY</b> - Uniquely identifies a row/record in another table</li>
                <li><b>CHECK</b> - Ensures that all values in a column satisfies a specific condition</li>
                <li><b>DEFAULT</b> - Sets a default value for a column when no value is specified</li>
                <li><b>INDEX</b> - Used to create and retrieve data from the database very quickly</li>
            </ul>

            <h id="order-by">ORDER BY</h>
            <ul>
                <li>ASC/DESC</li>
            </ul>

            <h id="in">IN</h>
            <ul>
                <li>The IN operator allows you to specify multiple values in a WHERE clause.</li>
                <li>The IN operator is a shorthand for multiple OR conditions.</li>
            </ul>

            <h id="between">BETWEEN</h>
            <ul>
                <li>The BETWEEN operator selects values within a given range. The values can be numbers, text, or dates.</li>
                <li>The BETWEEN operator is inclusive: begin and end values are included. </li>
            </ul>

            <h id="min-max">MIN/MAX</h>
            <ul>
                <li>The <text>MIN()</text> function returns the smallest value of the selected column.</li>
                <li>The <text>MAX()</text> function returns the largest value of the selected column.</li>
            </ul>
            
            <h id="union">UNION</h>
            <ul>
                <li>Each SELECT statement within UNION must have the same number of columns</li>
                <li>The columns must also have similar data types</li>
                <li>The columns in each SELECT statement must also be in the same order</li>
                <li>Syntax:
                    <ul>
                        <li>Only <b>distinct</b>: <code><text>SELECT column_name(s) FROM table1
                                UNION
                                SELECT column_name(s) FROM table2;</text></code></li>
                        <li>Allow <b>duplicates</b>: <code><text>SELECT column_name(s) FROM table1
                                UNION ALL
                                SELECT column_name(s) FROM table2;</text></code></li>
                    </ul>
                </li>
            </ul>

            <h id="join">JOIN</h>
            <ul>
                <li>A JOIN clause is used to combine rows from two or more tables, based on a related column between them.</li>
                <li>Types of JOIN:
                    <ul>
                        <li>(INNER) JOIN: Returns records that have matching values in both tables</li>
                        <li>LEFT (OUTER) JOIN: Return all records from the left table, and the matched records from the right table</li>
                        <li>RIGHT (OUTER) JOIN: Return all records from the right table, and the matched records from the left table</li>
                        <li>FULL (OUTER) JOIN: Return all records when there is a match in either left or right table</li>
                    </ul>
                    <img src="../img/SQL-Inner-Join.jpg" style="width:40%;height:40%;"><br>
                </li>
            </ul>

            <h id="group-by">GROUP BY</h>
            <ul>
                <li>The GROUP BY statement is often used with aggregate functions <text>(COUNT, MAX, MIN, SUM, AVG)</text> to group the result-set by one or more columns.</li>
            </ul>

            <h id="limit-offset">LIMIT and OFFSET</h><br>
            <code><text>SELECT column 
                FROM table
                LIMIT 18 OFFSET 8;</text>
            </code><br>
            Start by reading the query from offset. First you offset by 8, which means you skip the first 8 results of the query. 
            Then you limit by 18. Which means you consider records 9, 10, 11, 12, 13, 14, 15, 16....24, 25, 26 which are a total of 18 records.<br>
            <ul>Using <code><text>limit</text></code>:
                <li><text>one</text> parameter: number of rows to be returned from the <text>beginning</text> of the result set.
                    <ul>
                        <li><code><text>SELECT * FROM Data LIMIT 3;</text></code>: retrieve the first three rows</li>
                    </ul>
                </li>
                <li><text>two</text> parameter: the <text>first</text> is the <text>offset</text> and the <text>second</text> denotes the <text>count</text>.
                    <ul>
                        <li><code><text>SELECT * FROM Data LIMIT 1, 2;</text></code>: retrieve the rows 2-3(inclusive)</li>
                    </ul>
                </li>
            </ul>
            <br>

            <h id="ifnull">IFNULL</h>
            <ul>
                <li><code><text>IFNULL(expression, alt_value);</text></code></li>
                <li>If expression is NOT NULL, the IFNULL() function returns expression, otherwise, return alt_value.</li>
            </ul>
            

            <h id="basic-ops">Basic Operations</h><br>
            <b>Insert:</b><br>
            <code><text>INSERT INTO table_name (column1, column2, column3, ...) VALUES (value1, value2, value3, ...);</text></code><br>
            <b>Update:</b><br>
            <code><text>UPDATE table_name SET column1 = value1, column2 = value2, ... WHERE condition;</text></code><br>
            <b>Delete:</b><br>
            <code><text>DELETE FROM table_name WHERE condition;</text></code><br>
            <b>Alter:</b><br>
            <code><text>ALTER TABLE table_name ADD column_name datatype;</text></code><br>
            <code><text>ALTER TABLE Customers DROP COLUMN Email;</text></code>
            <code><text>ALTER TABLE table_name MODIFY COLUMN column_name datatype;</text></code>
            <br>


            <h id="null">NULL value</h><br>
            A field with a NULL value is a field with no value.<br>
            <b>How to test if a data is NULL?</b>: use <text><code>IS NULL</code></text><br>
            <br>


            <h id="like">LIKE operator</h><br>
            <ul>
                <li><text>%</text>: The percent sign represents zero, one, or multiple characters</li>
                <li><text>_</text>: The underscore represents a single character</li>
            </ul>
            <text><code>SELECT column1, column2, ... FROM table_name WHERE columnN LIKE pattern;</code></text><br>
            <br>


            <h id="alias">Aliases</h><br>
            <b>Alias Column Syntax</b><br>
            <code><text>SELECT column_name AS alias_name FROM table_name;</text></code><br>
            <b>Alias Table Syntax</b><br>
            <code><text>SELECT column_name(s) FROM table_name AS alias_name;</text></code><br>
            <br>

            <h id="select-into">SELECT...INTO</h>
            <ul>
                <li>copies data from one table into a new table.</li>
                <li>Syntax: <br>
                        <code><text>SELECT column1, column2, column3, ...<br>
                        INTO newtable [IN externaldb]<br>
                        FROM oldtable<br>
                        WHERE condition;</text></code></li>
            </ul>

            <h id="insert-into">INSERT INTO...SELECT...</h>
            <ul>
                <li>copies data from one table and inserts it into another(existing) table.</li>
                <li>Syntax: <br><code><text>
                    INSERT INTO table2 (column1, column2, column3, ...)<br>
                    SELECT column1, column2, column3, ...<br>
                    FROM table1<br>
                    WHERE condition;</text></code>
                </li>
            </ul>

            <h id="procedure">Stored Procedure</h>
            <ul>
                <li>A stored procedure is a segment of declarative SQL statements stored inside the database catalog.</li>
                <li>A stored procedure can be invoked by <text>triggers</text></li>
                <li>Syntax: <br><text><code>
                        DELIMITER //<br>
                        CREATE PROCEDURE GetAllProducts()<br>
                          BEGIN<br>
                          SELECT *  FROM products;<br>
                          END //<br>
                        DELIMITER ;</code></text>
                    <ul>
                        <li><text><code>DELIMITER //</code></text>: changes the standard delimiter which is <text>semicolon( ; )</text> to another to pass the stored procedure to the server as a <text>whole</text>.</li>
                        <li><text><code>CREATE PROCEDURE</code></text>: create a new stored procedure.</li>
                        <li><text><code>BEGIN...END</code></text>: body of the stored procedure</li>
                    </ul>
                </li>
                <li>Calling stored procedure: <text><code>CALL stored_procedure_name();</code></text></li>
                <li>Variables:
                    <ul>
                        <li>Syntax: <br><text><code>DECLARE variable_name datatype(size) DEFAULT default_value;</code></text></li>
                        <li><text><code>DECLARE</code></text>: specify variable name after DECLARE</li>
                        <li><text><code>DEFAULT</code></text>: assign the variable a default value</li>
                        <li>Example: <text><code>DECLARE total_sale INT DEFAULT 0;</code></text></li>
                        <li>Assigning: <br><text><code>
                                DECLARE total_count INT DEFAULT 0;<br>
                                SET total_count = 10;
                            </code></text></li>
                    </ul>
                </li>
                <li>Parameters
                    <ul>
                        <li>Modes:
                            <ul>
                                <li><text><code>IN</code></text>
                                    <ul>
                                        <li>default mode</li>
                                        <li>the calling program has to pass an argument to the stored procedure</li>
                                        <li>the value of an IN parameter is <b>protected</b>. It means that even the value of 
                                            the <text><code>IN</code></text> parameter is changed <text>inside</text> the stored procedure, its original value 
                                            is <text>retained</text> after the stored procedure ends.</li>
                                    </ul>
                                </li>
                                <li><text><code>OUT</code></text>
                                    <ul>
                                        <li>can be <text>changed</text> inside the stored procedure and its new value is <text>passed back</text> to the calling program</li>
                                    </ul>
                                </li>
                                <li><text><code>INOUT</code></text>
                                    <ul>
                                        <li>combination of <text><code>IN</code></text>  and <text><code>OUT</code></text>  parameters</li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                        <li>Syntax: <br><code><text>
                            CREATE PROCEDURE GetOfficeByCountry(IN countryName VARCHAR(255))
                            </text></code><br>
                            <text><code>CALL GetOfficeByCountry('USA');</code></text>
                        </li>
                    </ul>
                </li>
            </ul>

            <h id="trigger">Trigger</h>
            <ul>
                <li>Create trigger:
                    <ul>
                        <li><br><code><text>
                            CREATE TRIGGER trigger_name trigger_time trigger_event<br>
                            ON table_name<br>
                            FOR EACH ROW<br>
                            BEGIN<br>
                            ...<br>
                            END;
                            </text></code>
                        </li>
                    </ul>
                </li>
            </ul>

            <h id="questions">Query Questions</h>
            <ul>
                <li>Copy a table with/without index
                    <ul>
                        <li>With index: <br><code><text>
                            CREATE TABLE newtable LIKE oldtable;<br>
                            INSERT newtable SELECT * FROM oldtable;</text></code>
                        </li>
                        <li>Without index, just structure and data:<br><code><text>
                            CREATE TABLE tbl_new AS SELECT * FROM tbl_old;
                            </text></code>
                        </li>
                    </ul>
                </li>
            </ul>
       </div>

    </body>
</html>
